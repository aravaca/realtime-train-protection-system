# JR TASC ÏãúÎÆ¨Î†àÏù¥ÌÑ∞ ‚Äî JR Ï†ÑÎèôÏ∞® TASC Í∏∞Î∞ò Ï†ïÎ∞Ä Ï†ïÏ∞® Ïã§Ïäµ¬∑ÏãúÏó∞ ÏãúÏä§ÌÖú
**JR East/West ÏãúÎ¶¨Ï¶à Ï†ÑÏ∞®Ïùò Ïã§Ï†ú ÌòπÏùÄ Í∞ÄÏÉÅÏùò TASC ÏãúÏä§ÌÖú Í∏∞Î∞ò Ï†ïÏ∞® ÌõàÎ†® ÏãúÎÆ¨Î†àÏù¥ÌÑ∞**

Ïù¥ ÌíÄÏä§ÌÉù ÌîÑÎ°úÏ†ùÌä∏Îäî **JR ÏãúÎ¶¨Ï¶à Ï†ÑÎèôÏ∞®**Î•º Î™®Îç∏Î°ú Ìïú Ï†ïÏ∞® ÌõàÎ†®Ïö© ÏãúÎÆ¨Î†àÏù¥ÌÑ∞ÏûÖÎãàÎã§.  
ÌîÑÎ°†Ìä∏ÏóîÎìú(HTML/CSS/JS) + Î∞±ÏóîÎìú(FastAPI WebSocket)Î•º ÌÜµÌï©ÌïòÏó¨, **Î∏åÎ†àÏù¥ÌÅ¨ ÎÇ¥ÎπÑÍ≤åÏù¥ÏÖò Ï∫îÎ≤ÑÏä§**(Í±∞Î¶¨-ÏÜçÎèÑ Í≥°ÏÑ†)ÏôÄ **TASC(ÏûêÎèô Ï†ïÏ∞® Î≥¥Ï°∞)**Î•º ÌôúÏö©Ìïú **Ïã§ÏãúÍ∞Ñ Ï†úÎèô Ïó∞Ïäµ**Í≥º **ÌîºÎìúÎ∞±/Ï†êÏàò ÌèâÍ∞Ä**Î•º Ï†úÍ≥µÌï©ÎãàÎã§.

---


## ‚ú® What‚Äôs New (Ï£ºÏöî ÏóÖÎç∞Ïù¥Ìä∏ 2025.08.31)
- Ï∞®ÎüâÍµ∞ ÌôïÎåÄ: JR East (E233, E235) Îì± ÌÜµÍ∑ºÏó¥Ï∞® ÎøêÎßå ÏïÑÎãàÎùº Ï†úÎèôÍ∞êÏù¥ ÏÉÅÏù¥Ìïú ÌäπÍ∏âÏó¥Ï∞®, Ïπ®ÎåÄÏó¥Ï∞®, Ìá¥Ïó≠Ïó¥Ï∞® Îì± Ï∂îÍ∞Ä

- ÎÖ∏ÏÑ†/ÏãúÎ¶¨Ï¶àÎ≥Ñ ÏòµÏÖò Í≥†Ï†ï: Ï†ÑÎèôÏ∞® ÏÑ†ÌÉùÏóê Îî∞Îùº ÏãúÎ¶¨Ï¶à/Ìé∏ÏÑ±(ÎüâÏàò) ÏòµÏÖòÏù¥ ÏûêÎèô Ï†úÌïú

- ÎÇ†Ïî®/ÌïòÏ§ë Î∞òÏòÅ: ÎßàÏ∞∞Í≥ÑÏàò(ÎßëÏùå/ÎπÑ/Îàà) + ÌÉëÏäπÎ•†(Ìé∏ÏÑ±√óÏßàÎüâ) Ïã§ÏãúÍ∞Ñ Î∞òÏòÅ

- **TASC Ïò§ÌÜ†ÌååÏùºÎüø**:
  - 150m ÏßÄÏ†ê P3 ÏßÄÏÉÅÏûê Ïã†Ìò∏ ÏàòÏã† Ïãú ÏûêÎèô ÌôúÏÑ±Ìôî ‚Üí NÎã® Ï†úÎèô(build) Î∞è MÎã® ÏôÑÌï¥(relax) ‚Üí B1Î°ú ÏäπÏ∞®Í∞ê Ïú†ÏßÄÌïòÎ©∞ ÎßàÎ¨¥Î¶¨‚Äù
  - **Í≥ÑÎã® Ï†úÎèô(build)**: Îπ®Í∞Ñ ‚ÄúÎÇ®ÏùÄ Í±∞Î¶¨‚Äù ÏÑ∏Î°úÏÑ†Í≥º ÎÖ∏ÏπòÎ≥Ñ Ï†úÎèôÍ±∞Î¶¨ Í≥°ÏÑ†ÏùÑ ÎπÑÍµêÌï¥ ÌïÑÏöî Ïãú Ìïú Îã®Í≥ÑÏî© Í∞ïÌôî
  - **Í≥ÑÎã® ÏôÑÌï¥(relax)**: Îçî ÎÇÆÏùÄ ÎÖ∏ÏπòÎ°úÎèÑ Ï†ïÏßÄ Í∞ÄÎä•ÌïòÎ©¥ **Ìïú Îã®Í≥ÑÏî©** ÏôÑÌï¥ÌïòÎ©¥ÏÑú B1Î°ú ÎßàÎ¨¥Î¶¨
  - **Îç∞ÎìúÎ∞¥Îìú & ÏµúÏÜå Ïú†ÏßÄÏãúÍ∞Ñ**ÏúºÎ°ú ÌóåÌåÖ Î∞©ÏßÄ, ÏäπÏ∞®Í∞ê Ìñ•ÏÉÅ
  - ÏàòÎèô Í∞úÏûÖ(ÌÇ§/ÌÑ∞Ïπò) Ïãú Ï¶âÏãú **Manual**Î°ú Ï†ÑÌôò
- **Î∏åÎ†àÏù¥ÌÅ¨ ÎÇ¥ÎπÑÍ≤åÏù¥ÏÖò Ï∫îÎ≤ÑÏä§**:
  - ÎÖ∏ÏπòÎ≥Ñ Ï†úÎèô Í≥°ÏÑ†Í≥º ÎÇ®ÏùÄ Í±∞Î¶¨Ïùò ÍµêÏ∞®Ï†êÏùÑ Ïã§ÏãúÍ∞Ñ ÏãúÍ∞ÅÌôî ‚Üí **Ïñ∏Ï†ú Î∏åÎ†àÏù¥ÌÅ¨/ÏôÑÌï¥Ìï†ÏßÄ ÏßÅÍ¥ÄÏ†ÅÏúºÎ°ú ÌïôÏäµ**
- **Ïä§ÏΩîÏñ¥ Í∞úÏÑ†**:
  - ÏàòÎèô Ïö¥Ï†Ñ Ïãú Ï¥àÏ†úÎèô(B1/B2 1Ï¥à) ÏàòÌñâ Í∞ÄÏ†ê
  - ÎßàÏßÄÎßâ **B1 Ï†ïÏ∞® Í∞ÄÏ†ê**
  - **0cm Ï†ïÏ∞®(+400Ï†ê)** Î≥¥ÎÑàÏä§ Ï∂îÍ∞Ä
  - **00:00Ï¥à (+100Ï†ê) Ï†ïÏãú ÎèÑÏ∞©** Î≥¥ÎÑàÏä§ Ï∂îÍ∞Ä
  - **Ï†ÄÌÅ¨(Jerk)** Í∏∞Î∞ò ÏäπÏ∞®Í∞ê Ï†êÏàò Î∞òÏòÅ
  - TASC ON Ïãú Ï¥àÏ†úÎèô ÎØ∏Ïã§Ïãú ÌóàÏö©
- **ÌôòÍ≤Ω ÏöîÏÜå**: Îàà/ÎπÑ Ïï†ÎãàÎ©îÏù¥ÏÖò, Íµ¨Î∞∞/ÎßàÏ∞∞Í≥ÑÏàò(ÎÇ†Ïî®) Î∞òÏòÅ, ÌÉëÏäπÎ•†Ïóê Îî∞Î•∏ Ï¥ùÏ§ëÎüâ Î∞òÏòÅ

---
## ‚öôÔ∏è Tech Stack
- **Backend**: Python 3.12, FastAPI, WebSocket
- **Frontend**: HTML, CSS, JavaScript (Canvas Í∏∞Î∞ò HUD)
- **Deploy**: AWS EC2 (Amazon Linux), Nginx, Route53

---

## üß† Why TASC? (TASCÏùò Í∞ÄÏπò)
- **Ïö¥Ï†ÑÏûêÏùò Î∂ÄÎã¥¬∑ÌîºÎ°ú Í∞êÏÜå**: Î∞òÎ≥µ Íµ¨Í∞ÑÏóêÏÑú ÏûêÎèôÏúºÎ°ú Ï¥àÏ†úÎèô¬∑Í≥ÑÎã®Ï†úÎèô¬∑ÏôÑÌï¥Î•º ÏàòÌñâ ‚Üí Ïù∏ÏßÄ Î∂ÄÌïòÏôÄ Ï°∞Ïûë ÌîºÎ°ú ‚Üì
- **Ï†ïÏ∞® Ï†ïÌôïÎèÑ‚Üë / ÏäπÏ∞®Í∞ê ÏùºÍ¥ÄÏÑ±‚Üë**: Îç∞ÎìúÎ∞¥ÎìúÏôÄ ÌôÄÎìú ÌÉÄÏûÑÏúºÎ°ú Î∂àÌïÑÏöîÌïú ÎÖ∏Ïπò ÌóåÌåÖÏùÑ Î∞©ÏßÄ, Ìï≠ÏÉÅ **ÎπÑÏä∑Ìïú ÌîÑÎ°úÌååÏùº**Î°ú Ï†úÎèô
- **ÌõàÎ†® Ìö®Ïú®‚Üë**:
  - **Î∏åÎ†àÏù¥ÌÅ¨ ÎÇ¥ÎπÑ Ï∫îÎ≤ÑÏä§**Î°ú ‚ÄúÍ≥°ÏÑ†Í≥º Îπ®Í∞ÑÏÑ†Ïù¥ ÎßåÎÇ† Îïå‚ÄùÏùò ÌÉÄÏù¥Î∞ç Í∞êÍ∞ÅÏùÑ Ï≤¥Îìù
  - **ÌîºÎìúÎ∞±/Ï†êÏàò**Î°ú Î≥∏Ïù∏Ïùò ÏäµÍ¥ÄÏùÑ Ï†ïÎüâÏ†ÅÏúºÎ°ú Ï†êÍ≤Ä
- **ÍµêÏú°/Í≤ÄÏ¶ùÏö©**: ÏãúÎÇòÎ¶¨Ïò§(Í±∞Î¶¨/Íµ¨Î∞∞/ÏÜçÎèÑ/ÎßàÏ∞∞) Îã§ÏñëÌôî, **ÏäπÏ∞®Í∞ê(Ï†ÄÌÅ¨)**Í≥º **Ï†ïÏ∞® Ï†ïÎ∞ÄÎèÑ**Î•º Í∞ôÏù¥ ÌèâÍ∞Ä
- **ÎèÑÏûÖÎπÑÏö©/Î¶¨Ïä§ÌÅ¨ Î∂ÑÏÇ∞**: ATO(Ïó¥Ï∞®ÏûêÎèôÏö¥Ï†ÑÏû•Ïπò) ÎåÄÎπÑ ÎèÑÏûÖ ÎπÑÏö© Ï†ÄÎ†¥, TASCÎäî Í∏∞Í≥Ñ Ïò§ÏûëÎèôÏãú Í∏∞Í¥ÄÏÇ¨ Í∞úÏûÖÏúºÎ°ú Î¶¨Ïä§ÌÅ¨ ÏµúÏÜåÌôî Í∞ÄÎä•
---



## üß™ How TASC Works (ÏïåÍ≥†Î¶¨Ï¶ò ÏöîÏïΩ)

- **TASC ÌôúÏÑ±Ìôî Ï°∞Í±¥**:  
  - ÏãúÏûë Ï†Ñ TASCÎ•º ÌôúÏÑ±ÌôîÌïòÎ©¥ **TASCÍ∞Ä armed** ÏÉÅÌÉúÍ∞Ä Îê®  
  - armed ÏÉÅÌÉúÏóêÏÑú ÏàòÎèô Ï†úÎèô(B1/B2)ÏùÑ ÏÇ¨Ïö©ÌïòÏó¨ **150m ÏßÄÏ†ê Ïù¥Ï†ÑÍπåÏßÄ ÏÜçÎèÑÎ•º 60 km/h Ïù¥ÌïòÎ°ú Í∞êÏÜå**  
  - 150m ÏßÄÏ†ê **P3 ÏßÄÏÉÅÏûê ÏúÑÏπò**ÏóêÏÑú Ïã†Ìò∏Î•º ÏàòÏã†ÌïòÎ©¥ **TASCÍ∞Ä active** ÏÉÅÌÉúÎ°ú Ï†ÑÌôò  
  - Ïù¥ÌõÑ TASCÎäî **ÏûêÎèôÏúºÎ°ú Ï£ºÍ∞Ñ Ï†úÏñ¥Í∏∞Î•º ÏûëÎèô**ÌïòÏó¨ Ï†ïÏúÑÏπò Ï†ïÏ∞®(¬±35cm)Î•º Î≥¥Ï°∞ÌïòÎ©∞,  
    ÏàòÎèô Í∞úÏûÖ Ïãú Ï¶âÏãú **OFF**Î°ú Ï†ÑÌôò (ÌòÑÏã§ÏóêÏÑúÎäî OFF ÎêòÏßÄÎäî ÏïäÍ≥† TASCÍ∞Ä Í≥ÑÏÇ∞Ìïú Îã®Í≥º Í∏∞Í¥ÄÏÇ¨Í∞Ä Ï∑®Í∏âÌïú Îã® Ï§ë ÎÜíÏùÄ Îã®Ïù¥ Ï†ÅÏö©Îê®)


- **Ï¥àÏ†úÎèô (Initial Brake)**:
  - ÎØ∏Ïã§Ïãú. Îã®, ÏàòÎèôÏö¥Ï†ÑÏóêÏÑúÎäî ÌèâÍ∞ÄÌï≠Î™© Ï§ë ÏùºÎ∂Ä.

- **NÎã® Ï†úÎèô (N-Step Build)**:
  - ÌòÑÏû¨ ÎÖ∏Ïπò Ï†ïÏßÄÍ±∞Î¶¨ `s_cur` > `(rem - Îç∞ÎìúÎ∞¥Îìú)` ‚Üí Ìïú Îã®Í≥Ñ Î∏åÎ†àÏù¥ÌÅ¨ Í∞ïÌôî(‚Üë)  
  - Ï∂©Î∂ÑÌï¥ÏßÄÎ©¥ **ÏôÑÌï¥ Îã®Í≥ÑÎ°ú Ï†ÑÌôò**  

- **Í≥ÑÎã® ÏôÑÌï¥ (Stair-Step Relax)**:
  - Ìïú Îã®Í≥Ñ ÏïÑÎûò ÎÖ∏Ïπò Ï†ïÏßÄÍ±∞Î¶¨ `s_dn` ‚â§ `(rem + Îç∞ÎìúÎ∞¥Îìú)` ‚Üí Ìïú Îã®Í≥Ñ ÏôÑÌï¥(‚Üì)  
  - Î∞òÎ≥µ Ï†ÅÏö© ÌõÑ **ÎßàÏßÄÎßâ B1**Î°ú ÎßàÎ¨¥Î¶¨  

- **ÏïàÏ†ïÌôî Ïû•Ïπò (Stabilization)**:
  - **Îç∞ÎìúÎ∞¥Îìú(¬±m)**ÏôÄ **ÏµúÏÜå Ïú†ÏßÄÏãúÍ∞Ñ(s)** Ï†ÅÏö© ‚Üí ÌóåÌåÖ/ÎçúÏªπ Î∞©ÏßÄ  
  - 5km/h Ïù¥ÎÇ¥ Íµ¨Í∞ÑÏóêÏÑú **B1 ÏÑ†Ìòï ÏÜåÌîÑÌä∏ Ïä§ÌÉë** Ï†ÅÏö© ‚Üí ÏäπÏ∞®Í∞ê Í∞úÏÑ†  

---

## üñ• UI & Controls (Ï°∞Ïûë Î∞è ÏãúÍ∞ÅÌôî)

### 1. ÌëúÏãú Ìï≠Î™©
- **ÎÇ®ÏùÄ Í±∞Î¶¨**: Î™©Ìëú Ï†ïÏ∞® ÏßÄÏ†êÍπåÏßÄ ÎÇ®ÏùÄ Í±∞Î¶¨, HUD Î∞è Î∏åÎ†àÏù¥ÌÅ¨ ÎÇ¥ÎπÑ Ï∫îÎ≤ÑÏä§ÏóêÏÑú Ïã§ÏãúÍ∞Ñ ÌëúÏãú  
- **ÌòÑÏû¨ ÏÜçÎèÑ**: km/h Îã®ÏúÑÎ°ú ÌëúÏãú, ÏÜçÎèÑÏóê Îî∞Îùº Ï†úÎèô Í≥°ÏÑ† ÏûêÎèô Ï°∞Ï†ï  
- **Í≤ΩÍ≥º ÏãúÍ∞Ñ**: ÏãúÎÆ¨Î†àÏù¥ÏÖò ÏãúÏûë ÌõÑ Í≤ΩÍ≥º ÏãúÍ∞Ñ, ÏÉâÏÉÅÏúºÎ°ú Í≤ΩÍ≥º ÏÉÅÌÉú ÌëúÏãú  
  - ¬±2Ï¥à Ïù¥ÎÇ¥: **Ï¥àÎ°ùÏÉâ** Í∞ïÏ°∞  
  - ÏãúÍ∞Ñ Ï¥àÍ≥º(ÏñëÏàò): **Îπ®Í∞ï**ÏúºÎ°ú Í≤ΩÍ≥†  
- **ÌòÑÏû¨ ÎÖ∏Ïπò**: Ïö¥Ï†ÑÏûêÏùò Î∏åÎ†àÏù¥ÌÅ¨/Í∞ÄÏÜç Ï°∞Ïûë ÏÉÅÌÉú ÌëúÏãú  
- **Í≤ΩÏÇ¨ÎèÑ**: ÌòÑÏû¨ ÎÖ∏ÏÑ† Íµ¨Î∞∞Î•º ÌçºÏÑºÌä∏Î∞ÄÎ°ú ÌëúÏãú  

---

### 2. Î∏åÎ†àÏù¥ÌÅ¨ Ïª§Î∏å Ï∫îÎ≤ÑÏä§
- **XÏ∂ï**: Í±∞Î¶¨, **YÏ∂ï**: ÏÜçÎèÑ  
- ÎÖ∏ÏπòÎ≥Ñ Ï†úÎèô Í≥°ÏÑ†Í≥º **Îπ®Í∞Ñ ÏÑ∏Î°úÏÑ†(ÎÇ®ÏùÄ Í±∞Î¶¨)**Ïùò ÍµêÏ∞®Ï†êÏùÑ ÌÜµÌï¥ **Ï†úÎèô/ÏôÑÌï¥ ÌÉÄÏù¥Î∞ç** ÏßÅÍ¥ÄÏ†Å ÌôïÏù∏ Í∞ÄÎä•  
- Í≥°ÏÑ† ÏÉâÏÉÅÏúºÎ°ú ÌòÑÏû¨ ÎÖ∏Ïπò Í∞ïÏ°∞:  
  - ÏÑ†ÌÉù ÎÖ∏Ïπò: `#ffae00`  
  - ÎØ∏ÏÑ†ÌÉù ÎÖ∏Ïπò: `#3fa9ff`  
- EB(ÎπÑÏÉÅÏ†úÎèô)Îäî Îπ®Í∞ïÏúºÎ°ú ÌëúÏãú  

---

### 3. TASC Í≤ΩÍ≥†Îì± (HUD ÏÉÅÎã®)
- **ÏûêÎèôÌôî ÏÉÅÌÉú ÌëúÏãú**:
  - ÎåÄÍ∏∞/ÎπÑÌôúÏÑ±: ÌöåÏÉâ (`#444`)  
  - ÌôúÏÑ±(ÏûëÎèô Ï§ë): ÎÖ∏ÎûÄÏÉâ (`#fec670`)  
  - ÎåÄÍ∏∞ Ï§ë ÍπúÎπ°ÏûÑ: 0.25Ï¥à Îã®ÏúÑ ÍπúÎπ°Ïù¥Î©∞ TASC Ï§ÄÎπÑ ÏÉÅÌÉú ÌëúÏãú  
- **ÌÖçÏä§Ìä∏ ÎùºÎ≤®**: `TASC\nÏûêÎèô`  
- **ÏÉâÏÉÅ Î≥ÄÌôî**:
  - ÌôúÏÑ± Ïãú ÌÖçÏä§Ìä∏ Í≤ÄÏ†ï (`#000`)  
  - ÎπÑÌôúÏÑ±/ÎåÄÍ∏∞ Ïãú ÌÖçÏä§Ìä∏ Ìù∞ÏÉâ (`#fff`)  

---

### 4. Ï†ïÏúÑÏπò Ï†ïÏ∞® Î≤ÑÌäº (HUD ÏÉÅÎã®)
- **ÏúÑÏπò**: TASC Í≤ΩÍ≥†Îì± ÏôºÏ™Ω  
- **ÏÉÅÌÉú ÌëúÏãú**:
  - Í∏∞Î≥∏: ÌöåÏÉâ (`#444`)  
  - Ï†ïÏúÑÏπò Ï†ïÏ∞® ÏôÑÎ£å Ïãú: Ï¥àÎ°ù (`#9be071`)  
- **ÌÖçÏä§Ìä∏**: `TASC\nÏ†ïÏúÑÏπò`  
  - Ï†ïÏúÑÏπò ÏôÑÎ£å Ïãú Í≤ÄÏ†ï ÌÖçÏä§Ìä∏ (`#000`)  
- **Î≤ÑÌäº ÎîîÏûêÏù∏**: Îë•Í∑º ÏÇ¨Í∞ÅÌòï, Í∑∏ÎùºÎç∞Ïù¥ÏÖò ÌÖåÎëêÎ¶¨Î°ú 3D ÎäêÎÇå Í∞ïÏ°∞  

---

### 5. Ìé∏ÏÑ± ÎüâÏàò Ìå®ÎÑê (HUD ÏÉÅÎã®)
- **ÏúÑÏπò**: Ï†ïÏúÑÏπò Ï†ïÏ∞® Î≤ÑÌäº ÏôºÏ™Ω  
- **ÏÉÅÌÉú ÌëúÏãú**:
  - Í∏∞Î≥∏: ÌòÑÏû¨ Ï£ºÌñâ Ï§ëÏù∏ Ï∞®ÎüâÏùò Ìé∏ÏÑ±ÏùÑ ÌëúÏãú (8Îüâ, 14Îüâ Îì±)
  - Ï†úÎèôÍ±∞Î¶¨ Í≥ÑÏÇ∞ Ïãú Ï∞∏Í≥†  

---


### 6. Î∏åÎ†àÏù¥ÌÅ¨ ÎØ∏Îãà Ïù∏ÎîîÏºÄÏù¥ÌÑ∞
- **Í∏∞Îä•**: ÌòÑÏû¨ ÎÖ∏Ïπò ÏÉÅÌÉúÎ•º ÎØ∏Îãà ÎßâÎåÄÍ∏∞Î°ú ÏßÅÍ¥ÄÏ†Å ÌëúÏãú  
- **Íµ¨ÏÑ±**:
  - Ï¥ù Î∏îÎ°ù = ÎÖ∏Ïπò Í∞úÏàò (EB Ìè¨Ìï®)  
  - Í∞Å Î∏îÎ°ù ÏÉâÏÉÅ:  
    - ÌôúÏÑ± ÎÖ∏Ïπò: ÎÖ∏ÎûÄÏÉâ (`#ffd34d`)  
    - EB: Îπ®Í∞ï (`#ff5757`)  
    - ÎπÑÌôúÏÑ±: ÌöåÏÉâ (`rgba(60,80,100,0.35)`)  

---

### 7. ÌÇ§Î≥¥Îìú/Î™®Î∞îÏùº Ï°∞Ïûë
- **ÌÇ§Î≥¥Îìú**:
  - `Space`: ÏãúÏûë/Ïû¨ÏãúÏûë  
  - `W`: Î∏åÎ†àÏù¥ÌÅ¨ Í∞ïÌôî (ÎÖ∏Ïπò‚Üë)  
  - `S`: Î∏åÎ†àÏù¥ÌÅ¨ ÏôÑÌï¥ (ÎÖ∏Ïπò‚Üì)  
  - `N`: Ï†úÎèô Ìï¥Î∞©  
  - `E`: ÎπÑÏÉÅ Ï†úÎèô  
  - `A`: ÏµúÎåÄ ÏÉÅÏö© Ï†úÎèô  
  - `D`: ÏµúÏÜå ÏÉÅÏö© Ï†úÎèô  
- **Î™®Î∞îÏùº ÌÑ∞Ïπò**:
  - ÏÉÅÎã® ÌÑ∞Ïπò ‚Üí Î∏åÎ†àÏù¥ÌÅ¨ Í∞ïÌôî  
  - ÌïòÎã® ÌÑ∞Ïπò ‚Üí Î∏åÎ†àÏù¥ÌÅ¨ ÏôÑÌï¥  
- **TASC ÌÜ†Í∏Ä**:
  - HUD Ïö∞Ï∏° ÏÉÅÎã® Ïä§ÏúÑÏπò ON/OFF  
  - **ON** ‚Üí ÏàòÎèôÏúºÎ°ú Ï¥àÏ†úÎèô ÌõÑ TASCÍ∞Ä ÏûêÎèô Í∞úÏûÖ (ÏúÑ ÏïåÍ≥†Î¶¨Ï¶ò ÏÉÅÏÑ∏ ÏÑúÏà† Ï∞∏Í≥†)
  - **OFF** ‚Üí ÏàòÎèô Ï°∞Ïûë 

---

### 8. HUD & Î∏åÎ†àÏù¥ÌÅ¨ ÎÇ¥ÎπÑ ÌîºÎìúÎ∞±
- ÎÇ®ÏùÄ Í±∞Î¶¨, ÎÖ∏Ïπò, ÏÜçÎèÑ Í≥°ÏÑ†Í≥º **Îπ®Í∞ÑÏÑ† ÍµêÏ∞®** ÏãúÍ∞ÅÌôî ‚Üí Ï†úÎèô/ÏôÑÌï¥ ÌÉÄÏù¥Î∞ç ÏßÅÍ¥Ä ÌïôÏäµ  
- Ï†ïÏúÑÏπò Ï†ïÏ∞® ÏôÑÎ£å Ïãú, TASC Í≤ΩÍ≥†Îì±/Î≤ÑÌäº ÏÉâÏÉÅ Î≥ÄÌôîÎ°ú Ï¶âÏãú ÌîºÎìúÎ∞±  


---

## üîß Project Structure
```
‚îú‚îÄ‚îÄ scenario.json          # ÏãúÎÇòÎ¶¨Ïò§(Í±∞Î¶¨ L, Ï¥àÍ∏∞ÏÜçÎèÑ v0, Í≤ΩÏÇ¨, ÎßàÏ∞∞ Îì±)
‚îú‚îÄ‚îÄ vehicle.json           # Ï∞®Îüâ Ï†úÏõê(ÏßàÎüâ, notch_accels, ÏãúÍ∞ÑÏÉÅÏàò Îì±)
‚îú‚îÄ‚îÄ server.py              # FastAPI + WebSocket ÏÑúÎ≤Ñ, TASC Î°úÏßÅ Ìè¨Ìï®
‚îî‚îÄ‚îÄ static/
    ‚îú‚îÄ‚îÄ index.html         # UI (HUD/Ïò§Î≤ÑÎ†àÏù¥/TASC Ïä§ÏúÑÏπò/Ïï†ÎãàÎ©îÏù¥ÏÖò)
    ‚îî‚îÄ‚îÄ xxxxx.json       # Ï∞®Îüâ Ïù¥Î¶Ñ ÌëúÏãúÏö©
```

---

## üöÄ Run (Î°úÏª¨ Ïã§Ìñâ)
1. Î∏åÎùºÏö∞Ï†ÄÏóêÏÑú Ï†ëÏÜç  
[Î∞îÎ°ú Ï≤¥ÌóòÌï¥Î≥¥Í∏∞](https://jrtasc.kro.kr/) ‚Üí HUD/Ïò§Î≤ÑÎ†àÏù¥ UI Ïã§Ìñâ 


---

## ‚öôÔ∏è Configuration (ÏÑ§Ï†ï Ìè¨Ïù∏Ìä∏)
- **vehicle.json**
  - `notch_accels`: `[EB, B8, B7, ..., B1, N]` ÏàúÏÑú
  - `tau_cmd_ms`, `tau_brk_ms`: Ï†úÏñ¥/Ï†úÎèô ÏßÄÏó∞ ÏÉÅÏàò
  - `mass_t`: 1Îüâ Í∏∞Ï§Ä ÏßàÎüâ (Ï¥ùÏßàÎüâ=Ìé∏ÏÑ± Ïàò √ó ÌÉëÏäπÎ•†)
- **scenario.json**
  - `L`(Ï†ïÏ∞® Î™©Ìëú Í±∞Î¶¨), `v0`(Ï¥àÍ∏∞ ÏÜçÎèÑ), `grade_percent`, `mu`(ÎßàÏ∞∞)

---


## üìÑ License
MIT License ¬© 2025 Hyungsuk Choi, University of Maryland

---

## üìå ÍµêÏú°¬∑Ïó∞Ïäµ ÌôúÏö© ÌåÅ
- **Î∏åÎ†àÏù¥ÌÅ¨ ÎÇ¥ÎπÑ Ï∫îÎ≤ÑÏä§**ÏóêÏÑú ‚ÄúÎπ®Í∞ÑÏÑ†Í≥º Í≥°ÏÑ†Ïù¥ ÎßåÎÇòÎäî ÏßÄÏ†ê‚ÄùÏùÑ ÎÖ∏Î†§ **Í≥ÑÎã® Ï†úÎèô¬∑ÏôÑÌï¥ ÌÉÄÏù¥Î∞ç**ÏùÑ ÏùΩÏñ¥Î≥¥ÏÑ∏Ïöî.
- TASC ON ÏÉÅÌÉúÏóêÏÑú ÏûêÎèô ÌîÑÎ°úÌååÏùºÏùÑ Í¥ÄÏ∞∞Ìïú Îí§, **ÏàòÎèôÏúºÎ°ú ÎèôÏùºÌïú Ìå®ÌÑ¥ÏùÑ Ïû¨ÌòÑ**Ìï¥Î≥¥Î©¥ Ïã§Î†•Ïù¥ Îπ†Î•¥Í≤å Ìñ•ÏÉÅÎê©ÎãàÎã§.
- **0cm Ï†ïÏ∞® Î≥¥ÎÑàÏä§** Î∞è **0Ï¥à Ï†ïÏãú Î≥¥ÎÑàÏä§** Î•º ÎÖ∏Î¶¨Î©∞ Ï†ÄÌÅ¨ Ï†êÏàòÎèÑ Ïã†Í≤Ω Ïì∞Î©¥, Ï†ïÌôïÎèÑ+ÏäπÏ∞®Í∞ê **Îëò Îã§** Ïû°ÏùÑ Ïàò ÏûàÏäµÎãàÎã§.

---

# JR TASC Simulator ‚Äî Advanced TASC-based Precision Stop Simulator for JR Series EMUs
**A simulator for JR East/West EMU series trains based on real or virtual TASC systems for precision stop training.**

This full-stack project models **JR series EMUs** for training purposes.  
Frontend (HTML/CSS/JS) + Backend (FastAPI WebSocket) integration provides **brake navigation canvas** (distance-speed curves) and **TASC (Train Automatic Stop Controller)** for **real-time braking practice** and **feedback/score evaluation**.

---

## ‚ú® What‚Äôs New (Key Updates 2025.08.31)
- Expanded train series: JR East (E233, E235) commuter trains as well as special express, sleeper, and retired trains with different braking profiles.
- Auto-restriction of options by series/composition: train selection automatically limits series/formation.
- Weather & load simulation: friction coefficient (sunny/rainy/snowy) + passenger load (formation √ó mass) reflected in real-time.
- **TASC Autopilot**:
  - Activates automatically at 150m when passing P3 trackside signal ‚Üí N-step braking (build) and M-step relaxing ‚Üí B1 soft stop for ride comfort.
  - **Stair-step build**: compares red "remaining distance" line with brake-distance curves; increases brake step if needed.
  - **Stair-step relax**: decreases brake step gradually if stopping is possible with a lower notch, finishing at **B1**.
  - **Deadband & minimum hold time** prevent hunting; improve ride comfort.
  - Manual intervention (keyboard/touch) immediately switches to **Manual**.
- **Brake Navigation Canvas**:
  - Visualizes brake-distance curves and remaining distance in real-time ‚Üí intuitive guidance for when to brake/relax.
- **Scoring Improvements**:
  - Extra points for initial braking (B1/B2 1s) during manual operation.
  - Bonus for last B1 stop.
  - **0cm stop (+400 points)** bonus added.
  - **00:00s on-time arrival (+100 points)** bonus.
  - Jerk-based ride comfort scoring.
  - TASC ON allows initial braking omission.
- **Environment Simulation**: snow/rain animation, slope/friction reflection, total mass adjusted by passenger load.

---

## ‚öôÔ∏è Tech Stack
- **Backend**: Python 3.12, FastAPI, WebSocket
- **Frontend**: HTML, CSS, JavaScript (Canvas-based HUD)
- **Deployment**: AWS EC2 (Amazon Linux), Nginx, Route53

---

## üß† Why TASC? (Value of TASC)
- **Reduces driver workload & fatigue**: automatically executes initial, stair-step braking and relaxing ‚Üí reduces cognitive load and control fatigue.
- **Higher stopping accuracy & consistent ride comfort**: deadband and hold time prevent unnecessary notch hunting; always produces a **similar braking profile**.
- **Training efficiency**:
  - **Brake navigation canvas** helps learners understand "where curves meet the red line."
  - Quantitative feedback and scoring allows self-assessment of braking habits.
- **Educational/verification use**: various scenarios (distance/slope/speed/friction), simultaneous evaluation of ride comfort (jerk) and stopping precision.
- **Low-cost and low-risk**: cheaper than ATO systems; TASC allows manual override if equipment malfunctions.

---

## üß™ How TASC Works (Algorithm Overview)

- **TASC Activation**:  
  - Activating TASC before starting sets it to **armed**.  
  - In armed state, using manual brakes (B1/B2) reduces speed to ‚â§ 60 km/h before 150m mark.  
  - At the **150m P3 trackside signal**, TASC switches to **active**.  
  - TASC then **automatically controls the brake lever** to assist precision stop (¬±35cm),  
    but any manual input immediately switches it **OFF** (in reality, TASC applies the higher notch of calculated or manual lever).

- **Initial Brake (B1/B2)**:
  - Optional; in manual operation contributes to scoring.

- **N-Step Build (Stair-Step Braking)**:
  - If current notch stop distance `s_cur` > `(rem - deadband)`, increase notch (‚Üë).  
  - Switch to relax phase when sufficient.

- **Stair-Step Relax**:
  - If `s_dn` ‚â§ `(rem + deadband)`, decrease notch (‚Üì).  
  - Repeat until finishing at **B1**.

- **Stabilization**:
  - Deadband (¬±m) and minimum hold time applied ‚Üí prevent hunting and jerkiness.  
  - Soft linear B1 stop below 5 km/h ‚Üí improved ride comfort.

---

## üñ• UI & Controls (Operation & Visualization)

### 1. Displayed Metrics
- **Remaining distance**: distance to target stop; displayed on HUD & brake navigation canvas in real-time.  
- **Current speed**: km/h, brake curves adjust according to speed.  
- **Elapsed time**: simulation time since start; color indicates status:
  - ¬±2s: **green highlight**
  - Time exceeded (positive): **red warning**
- **Current notch**: driver brake/traction lever state.
- **Gradient**: slope percentage of the track.

---

### 2. Brake Curve Canvas
- **X-axis**: distance, **Y-axis**: speed  
- Intersection of notch brake curves and **red vertical line (remaining distance)** shows **brake/relax timing** intuitively.  
- Curve colors highlight current notch:
  - Selected notch: `#ffae00`  
  - Unselected notch: `#3fa9ff`  
- EB (Emergency Brake) is shown in red.

---

### 3. TASC Indicator (HUD Top)
- **Automation status**:
  - Idle/inactive: gray (`#444`)  
  - Active: yellow (`#fec670`)  
  - Armed blinking: 0.25s intervals to indicate readiness  
- **Text label**: `TASC\nAUTO`  
- **Text color**:
  - Active: black (`#000`)  
  - Inactive/idle: white (`#fff`)  

---

### 4. Precision Stop Button (HUD Top)
- **Position**: left of TASC indicator  
- **State color**:
  - Default: gray (`#444`)  
  - Precision stop achieved: green (`#9be071`)  
- **Text**: `TASC\nSTOP`  
  - Text turns black when precision achieved (`#000`)  
- **Design**: rounded rectangle with gradient border for 3D effect.

---

### 5. Brake Mini Indicator
- **Function**: displays current notch as a mini bar graph.  
- **Composition**:
  - Total blocks = number of notches (including EB)  
  - Block colors:  
    - Active notch: yellow (`#ffd34d`)  
    - EB: red (`#ff5757`)  
    - Inactive: gray (`rgba(60,80,100,0.35)`)

---

### 6. Keyboard / Mobile Controls
- **Keyboard**:
  - `Space`: Start/Restart  
  - `W`: Increase brake notch  
  - `S`: Decrease brake notch  
  - `N`: Release brakes  
  - `E`: Emergency brake  
  - `A`: Maximum service brake  
  - `D`: Minimum service brake  
- **Mobile Touch**:
  - Top touch ‚Üí Increase brake notch  
  - Bottom touch ‚Üí Decrease brake notch  
- **TASC Toggle**:
  - HUD top-right ON/OFF switch  
  - **ON** ‚Üí manual initial braking followed by automatic control (see algorithm)  
  - **OFF** ‚Üí fully manual operation  

---

### 7. HUD & Brake Navigation Feedback
- Real-time visualization of remaining distance, notch, and speed curve intersections ‚Üí intuitive brake/relax timing.  
- TASC indicator/button color changes upon precision stop completion.

---

## üîß Project Structure
‚îú‚îÄ‚îÄ scenario.json # Scenario (distance L, initial speed v0, slope, friction, etc.)
‚îú‚îÄ‚îÄ vehicle.json # Vehicle specs (mass, notch_accels, time constants, etc.)
‚îú‚îÄ‚îÄ server.py # FastAPI + WebSocket server, including TASC logic
‚îî‚îÄ‚îÄ static/
      ‚îú‚îÄ‚îÄ index.html # UI (HUD/Overlay/TASC switch/animations)
      ‚îî‚îÄ‚îÄ xxxxx.json # Vehicle name display data


---

## üöÄ Run Locally
1. Open in browser  
[Try it live](https://jrtasc.kro.kr/) 

---

## ‚öôÔ∏è Configuration
- **vehicle.json**
  - `notch_accels`: `[EB, B8, B7, ..., B1, N]` order
  - `tau_cmd_ms`, `tau_brk_ms`: control/brake delay constants
  - `mass_t`: single car mass (total mass = formation √ó passenger load)
- **scenario.json**
  - `L` (target stop distance), `v0` (initial speed), `grade_percent`, `mu` (friction)

---

## üìÑ License
MIT License ¬© 2025 Hyungsuk Choi, University of Maryland

---

## üìå Training Tips
- On the **brake navigation canvas**, watch where the red line intersects curves ‚Üí read **stair-step braking & relaxing timing**.  
- Observe TASC ON autopilot profiles, then try to **replicate manually** for skill improvement.  
- Aim for **0cm stop bonus** and **on-time arrival bonus**, while monitoring jerk score for **both accuracy and ride comfort**.
